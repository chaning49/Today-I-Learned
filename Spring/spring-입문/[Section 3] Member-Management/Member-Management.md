# íšŒì› ê´€ë¦¬ ì˜ˆì œ - ë°±ì—”ë“œ ê°œë°œ
## ğŸ“Œëª©ì°¨
- [ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ì •ë¦¬](#ë¹„ì¦ˆë‹ˆìŠ¤-ìš”êµ¬ì‚¬í•­-ì •ë¦¬)
- [íšŒì› ë„ë©”ì¸ê³¼ ë¦¬í¬ì§€í† ë¦¬ ë§Œë“¤ê¸°](#íšŒì›-ë„ë©”ì¸ê³¼-ë¦¬í¬ì§€í† ë¦¬-ë§Œë“¤ê¸°)
- [íšŒì› ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±](#íšŒì›-ë¦¬í¬ì§€í† ë¦¬-í…ŒìŠ¤íŠ¸-ì¼€ì´ìŠ¤-ì‘ì„±)
- íšŒì› ì„œë¹„ìŠ¤ ê°œë°œ
- íšŒì› ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸

<br>

## âœ…ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ì •ë¦¬
- ë°ì´í„°: íšŒì›ID, ì´ë¦„
- ê¸°ëŠ¥: íšŒì› ë“±ë¡, ì¡°íšŒ
- ì•„ì§ ë°ì´í„° ì €ì¥ì†Œ ë¯¸ì •(ê°€ìƒì˜ ì‹œë‚˜ë¦¬ì˜¤)

<br>

**ì¼ë°˜ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ êµ¬ì¡°**
![á„‹á…µá†¯á„‡á…¡á†«á„Œá…¥á†¨á„‹á…µá†« á„‹á…°á†¸ á„‹á…¢á„‘á…³á†¯á„…á…µá„á…¦á„‹á…µá„‰á…§á†« á„€á…¨á„á…³á†¼ á„€á…®á„Œá…©](https://user-images.githubusercontent.com/79316402/211205138-764ca1dd-8d67-4fd7-be63-5ae2418de0de.png)
- ì»¨íŠ¸ë¡¤ëŸ¬: ì›¹ MVCì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• , APIë¥¼ ë§Œë“œëŠ” ê²½ìš°
- ì„œë¹„ìŠ¤: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„(íšŒì› ì¤‘ë³µê°€ì… ë¶ˆê°€ ë“±)
- ë¦¬í¬ì§€í† ë¦¬: ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼, ë„ë©”ì¸ ê°ì²´ë¥¼ DBì— ì €ì¥í•˜ê³  ê´€ë¦¬
- ë„ë©”ì¸: ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ê°ì²´, ì˜ˆ) íšŒì›, ì£¼ë¬¸, ì¿ í° ë“± ì£¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ê´€ë¦¬ë¨

<br>

**í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„** 
![á„á…³á†¯á„…á…¢á„‰á…³ á„‹á…´á„Œá…©á†«á„€á…ªá†«á„€á…¨](https://user-images.githubusercontent.com/79316402/211205443-acb40ef8-a265-4e01-b51f-8c9af8de4cad.png)
- ì•„ì§ ë°ì´í„° ì €ì¥ì†Œê°€ ì„ ì •ë˜ì§€ ì•Šì•„ì„œ, ìš°ì„  ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„
- ë°ì´í„° ì €ì¥ì†ŒëŠ” RDB, NoSQL ë“± ë‹¤ì–‘í•œ ì €ì¥ì†Œë¥¼ ê³ ë¯¼ì¤‘ì¸ ìƒí™©ìœ¼ë¡œ ê°€ì •
- ê°œë°œì„ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œ ì´ˆê¸° ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” êµ¬í˜„ì²´ë¡œ ê°€ë²¼ìš´ ë©”ëª¨ë¦¬ ê¸°ë°˜ì˜ ë°ì´í„° ì €ì¥ì†Œ ì‚¬ìš©

<br>

## âœ…íšŒì› ë„ë©”ì¸ê³¼ ë¦¬í¬ì§€í† ë¦¬ ë§Œë“¤ê¸°
**Member**
```java
public class Member {

    private Long id; // ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ìš©ë„
    private String name;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

<br>

**MemberRepository**
```java
import hello.hellospring.domain.Member;

import java.util.List;
import java.util.Optional;

public interface MemberRepository {
    Member save(Member member);
    Optional<Member> findById(Long id); // java 8ì— ë“¤ì–´ê°„ ê²ƒì´ê³ , idë‚˜ nameì´ nullì¸ ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ ì‚¬ìš©í•œë‹¤.
    Optional<Member> findByName(String name);
    List<Member> findAll();
}
```
- Optional: java 8ì—ì„œ ìƒê¸´ ê²ƒì´ë‹¤. idë‚˜ nameì´ nullì¸ ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ ì‚¬ìš©í•œë‹¤.

<br>

**MemoryMemberRepository**
```java
import hello.hellospring.domain.Member;

import java.util.*;

public class MemoryMemberRepository implements MemberRepository{

    private static Map<Long, Member> store = new HashMap<>(); // ì‹¤ì œ ê°œë°œì„ í•  ë•ŒëŠ” ë™ì‹œì„± ë¬¸ì œê°€ ìˆì–´ì„œ ê³µìœ ë˜ëŠ” ë³€ìˆ˜ì¸ ê²½ìš° ConcurrentHashMapì„ ì‚¬ìš©í•œë‹¤.
    private static long sequence = 0L; // í‚¤ ê°’ì„ ìƒì„±í•´ì£¼ê¸° ìœ„í•œ ë³€ìˆ˜, ë™ì‹œì„± ë¬¸ì œë¥¼ ê³ ë ¤í•˜ë©´ AtoimicLong ì‚¬ìš©

    @Override
    public Member save(Member member) {
        member.setId(++sequence);
        store.put(member.getId(), member);
        return member;
    }

    @Override
    public Optional<Member> findById(Long id) {
        return Optional.ofNullable(store.get(id)); // nullì„ ëŒ€ë¹„í•˜ì—¬ Optional ì‚¬ìš©
    }

    @Override
    public Optional<Member> findByName(String name) {
        return store.values().stream()
                .filter(member -> member.getName().equals(name))
                .findAny(); // í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ ì°¾ëŠ”ë‹¤.
    }

    @Override
    public List<Member> findAll() {
        return new ArrayList<>(store.values());
    }
}
```
- HashMap: ì‹¤ì œ ê°œë°œì„ í•  ë•ŒëŠ” ë™ì‹œì„± ë¬¸ì œê°€ ìˆì–´ì„œ ê³µìœ ë˜ëŠ” ë³€ìˆ˜ì¸ ê²½ìš° ConcurrentHashMapì„ ì‚¬ìš©í•œë‹¤.
- long: ë™ì‹œì„± ë¬¸ì œë¥¼ ê³ ë ¤í•˜ë©´ AtomicLong ì‚¬ìš©í•œë‹¤.

<br>

## âœ…íšŒì› ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±
ê°œë°œí•œ ê¸°ëŠ¥ì„ ì‹¤í–‰í•´ì„œ í…ŒìŠ¤íŠ¸ í•  ë•Œ 

1. ìë°”ì˜ main ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì‹¤í–‰í•˜ê±°ë‚˜, 
2. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰í•œë‹¤. 

ì´ëŸ¬í•œ ë°©ë²•ì€ ì¤€ë¹„í•˜ê³  ì‹¤í–‰í•˜ëŠ”ë° ì˜¤ë˜ ê±¸ë¦¬ê³ , ë°˜ë³µ ì‹¤í–‰í•˜ê¸° ì–´ë µê³  ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ í•œ ë²ˆì— ì‹¤í–‰í•˜ê¸° ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. 

â†’ ìë°”ëŠ” **JUnit**ì´ë¼ëŠ” í”„ë ˆì„ì›Œí¬ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ì„œ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.

**íšŒì› ë¦¬í¬ì§€í† ë¦¬ ë©”ëª¨ë¦¬ êµ¬í˜„ì²´ í…ŒìŠ¤íŠ¸**

- í…ŒìŠ¤íŠ¸ìš© íŒ¨í‚¤ì§€ëŠ” ë³´í†µ ì‹¤ì œ ê¸°ëŠ¥ì´ ë™ì‘í•˜ëŠ” íŒ¨í‚¤ì§€ì˜ ì´ë¦„ê³¼ ë˜‘ê°™ì´ ë§Œë“ ë‹¤.
1. `src/test/java` í•˜ìœ„ í´ë”ì— repository íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•œë‹¤.
    - í…ŒìŠ¤íŠ¸í•  í´ë˜ìŠ¤ì˜ ì´ë¦„ ë’¤ì— Testë¥¼ ë¶™ì—¬ì„œ `~Test.java` í˜•íƒœë¡œ ë§Œë“œëŠ” ê²ƒì´ ê´€ë¡€ì´ë‹¤.
    - publicìœ¼ë¡œ í•˜ì§€ ì•Šì•„ë„ ë¨ â†’ ë‹¤ë¥¸ë°ì„œ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë‹ˆê¹Œ!
2. `@Test` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ê¸°ëŠ¥ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.
3. `save()` ê²°ê³¼ í™•ì¸í•˜ê¸°
    1. `System.out.println("result = " + (result == member));` ìœ¼ë¡œ ì¶œë ¥ë¬¸ì„ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ í•´ë‹¹ ë°©ë²•ì€ ë¹„íš¨ìœ¨ì ì´ë‹¤.
    2. `Assertions.assertEquals(expected, actual);` ì„ ì‚¬ìš©í•˜ë©´ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. expectedì— ê¸°ëŒ€ê°’ì„ ë„£ê³  actualê³¼ ë¹„êµí•˜ëŠ” ê²ƒì´ë‹¤. `org.junit.jupiter.api.Test;` ë¥¼ import í•´ì„œ ì‚¬ìš©í•œë‹¤.
    3. `Assertions.assertThat(member).isEqualTo(result);` ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë¬¸ì¥ ì½ë“¯ ì½í˜€ì„œ ì´í•´ê°€ ë¹ ë¥´ë‹¤. `org.assertj.core.api.Assertions;` ë¥¼ importí•´ì„œ ì‚¬ìš©í•œë‹¤. Assertions ë¶€ë¶„ì— option + enterë¥¼ ì…ë ¥í•´ì„œ static importë¥¼ ì‚¬ìš©í•˜ë©´ **`assertThat**(member).isEqualTo(result);` í˜•íƒœë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
    
    â†’ ì‹¤ë¬´ì—ì„œëŠ” build íˆ´ê³¼ ì—®ì–´ì„œ ë¹Œë“œì‹œ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë¥¼ í†µê³¼í•˜ì§€ ëª»í•˜ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ëª» ê°€ë„ë¡ ë§Œë“ ë‹¤.
    
4. `findByName()` ê²°ê³¼ í™•ì¸í•˜ê¸°

5. â­Â Test CaseëŠ” ìˆœì„œì™€ ìƒê´€ì—†ì´ ì •ìƒ ë™ì‘í•˜ë„ë¡, ì˜ì¡´ê´€ê³„ ì—†ì´ ì„¤ê³„í•´ì•¼ í•œë‹¤. ì¦‰ í…ŒìŠ¤íŠ¸ê°€ í•˜ë‚˜ ëë‚˜ë©´ ë°ì´í„°ë¥¼ í´ë¦¬ì–´í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì–´ì•¼ í•œë‹¤. â†’ í•˜ë‚˜ì˜ í…ŒìŠ¤íŠ¸ê°€ ëë‚  ë•Œë§ˆë‹¤ ì €ì¥ì†Œë‚˜ ê³µìš© ë°ì´í„°ë¥¼ ê¹”ë”í•˜ê²Œ ì§€ì›Œì£¼ì–´ì•¼ í•œë‹¤.
    1. *`@AfterEach`* ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤˜ì„œ ê° ë©”ì†Œë“œ ë™ì‘ì´ ëë‚œ ì´í›„ì— ì²˜ë¦¬ë¥¼ í•´ì¤„ ìˆ˜ ìˆë‹¤.
    2. MemoryMemberRepository í´ë˜ìŠ¤ì— clearStore()ë¼ëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ì–´ repositoryë¥¼ ë¹„ì›Œì¤„ ìˆ˜ ìˆë‹¤.

â†’ Test Caseì˜ ì¥ì ì€ í´ë˜ìŠ¤ ë ˆë²¨, ì „ì²´ í´ë˜ìŠ¤ ë ˆë²¨ ë‹¨ìœ„ë¡œ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.

â†’ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë¨¼ì € ì‘ì„±í•˜ê³  í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒ: TDD(í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ, Test Driven Development)

â†’ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì „ì²´ë¥¼ ëŒë ¤ì„œ í…ŒìŠ¤íŠ¸ í•´ë³´ì!

â†’ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì€ ì¤‘ìš”í•œ ë¶€ë¶„ì´ë¯€ë¡œ ê¼­ ê¹Šê²Œ ê³µë¶€í•  ê²ƒ!

**MemoryMemberRepository**

```java
package hello.hellospring.repository;

import hello.hellospring.domain.Member;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;

import java.util.List;
import java.util.Optional;

import static org.assertj.core.api.Assertions.*;

class MemoryMemberRepositoryTest {

    MemoryMemberRepository repository = new MemoryMemberRepository(); // MemoryMemberRepositoryë§Œ í…ŒìŠ¤í‹‘ í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.

    @AfterEach
    public void afterEach() {
        repository.clearStore();
    }

    @Test
    public void save() {
        Member member = new Member();
        member.setName("spring");

        repository.save(member);

        Member result = repository.findById(member.getId()).get(); // Optionalì˜ ê²½ìš° get()ìœ¼ë¡œ ë°”ë¡œ êº¼ë‚¼ ìˆ˜ ìˆì§€ë§Œ ë¹„ì¶”!
        assertThat(member).isEqualTo(result);
    }
    
    @Test
    public void findByName() {
        Member member1 = new Member();
        member1.setName("spring1");
        repository.save(member1);

        Member member2 = new Member();
        member2.setName("spring2");
        repository.save(member2);

        Member result = repository.findByName("spring1").get();

        assertThat(result).isEqualTo(member1);
    }

    @Test
    public void findAll() {
        Member member1 = new Member();
        member1.setName("spring1");
        repository.save(member1);

        Member member2 = new Member();
        member2.setName("spring2");
        repository.save(member2);

        List<Member> result = repository.findAll();
        assertThat(result.size()).isEqualTo(2);
    }
}
```

### ê¿€íŒ ì €ì¥ì†Œ
ğŸ¯Â ê¿€íŒ: ë‹¤ìŒ ì¤„ë¡œ ë„˜ì–´ê°€ë ¤ë©´ ì»¤ì„œë¥¼ ëìœ¼ë¡œ ì˜®ê¸°ì§€ ë§ê³  cmd + shift + enterë¡œ ë°”ë¡œ ë‹¤ìŒì¤„ ê°ˆ ìˆ˜ ìˆë‹¤.
![image](https://user-images.githubusercontent.com/79316402/224724800-32411333-4f5f-44af-9481-359bab103cad.png)
![image](https://user-images.githubusercontent.com/79316402/224724850-6a1a0422-4694-4cd5-a8de-3784c67d4145.png)

ğŸ¯Â ê¿€íŒ: ê°™ì€ ë‚´ìš©ì„ ë³µë¶™í•  ë•Œ, ë³€ìˆ˜ ì´ë¦„ì„ ì¼ê´„ì ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´ shift + F6ì„ ëˆŒëŸ¬ í•œêº¼ë²ˆì— ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
![image](https://user-images.githubusercontent.com/79316402/224724996-35ca4709-b9ba-46d8-8d77-88b2f6b73617.png)

ğŸ¯Â ê¿€íŒ: Optional í˜•íƒœì˜ ë³€ìˆ˜ëŠ” get()ì„ í†µí•´ì„œ Optionalì„ ì—†ì• ì¤„ ìˆ˜ ìˆë‹¤.
![image](https://user-images.githubusercontent.com/79316402/224725057-0123a5f7-e333-483a-8213-5cb6b8b28f81.png)

ğŸ¯Â ê¿€íŒ: íŠ¹ì • í•¨ìˆ˜ì˜ return ê°’ì„ ë³€ìˆ˜ì— ì €ì¥í•˜ê³  ì‹¶ì„ ë•ŒëŠ” option + cmd + vë¥¼ ëˆ„ë¥´ë©´ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤. ë‹¨ ì»¤ì„œê°€ ë§¨ ëì— ìˆì–´ì•¼ í•œë‹¤.
![image](https://user-images.githubusercontent.com/79316402/224725164-6df21d5b-3eed-4f3b-9e00-9ee0488f84bf.png)
<br>
![image](https://user-images.githubusercontent.com/79316402/224725213-2d56d6c6-92d4-491d-9afd-e21555511a02.png)


